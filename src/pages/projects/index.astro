---
import { getCollection } from "astro:content";
import Layout from "@layout/Layout.astro";
import ScrollView from "@component/ScrollView.astro";
import ProjectTile from "@component/ProjectTile.astro";
import { createText } from "@src/utility";

const projects = (await getCollection("project"))
    .filter((e) => e.data.global)
    .sort((a, b) => {
        const da = a.data.date?.getTime() ?? 100;
        const db = b.data.date?.getTime() ?? 100;
        return db - da;
    });
---

<Layout title="Personal">
    <ScrollView useMargin={true}>
        <div class="content">
            <section id="about">
                Projects
                <hr>
                All the projects I've worked on and felt that they are worthy of including here. Also includes projects from my professional experience.
            </section>
            <section id="projects">
                {
                    projects.map((post, index) => {
                        return (
                            <a
                                data-group={post.data.group}
                                href={`/${post.id}`}
                            >
                                <ProjectTile project={post} />
                            </a>
                        );
                    })
                }
            </section>
        </div>
    </ScrollView>
</Layout>

<style>
    .content {
        display: flex;
        flex-direction: column;
        padding: 1rem;
        gap: 1rem;
    }

    section {
        display: flex;
        flex-direction: column;
        padding: 1rem;
        border: var(--border-width) dotted var(--dimmed-glow-color);
        overflow: hidden;
        gap: 0.5rem;
        background: var(--box-fade);
    }

    section#projects {
        background: none;
        border: none;
        padding: 0;
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    section#projects a {
        text-decoration: none;
        background: var(--box-fade);
    }
</style>
