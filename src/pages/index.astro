---
import Layout from "../layouts/Layout.astro";
import ScrollView from "../components/ScrollView.astro";
import ExperienceBar from "../components/ExperienceBar.astro";
import Box from "../components/Box.astro";
import { getCollection } from "astro:content";

const now = new Date().getTime();
const experience = (await getCollection("experience")).sort((a, b) => {
	const da = a.data.endDate?.getTime() ?? now;
	const db = b.data.endDate?.getTime() ?? now;
	return db - da;
});
---

<Layout>
	<script slot="head" type="application/ld+json">
		{
			"@context": "https://schema.org",
			"@type": "Person",
			"name": "Jake Korvemaa",
			"url": "https://korvema.dev",
			"image": "https://korvemaa.dev/profile.png",
			"jobTitle": "Software Engineer",
			"worksFor": {
				"@type": "Organization",
				"name": "Enviz"
			},
			"nationality": "Australian",
			"birthDate": "2003",
			"sameAs": [
				"https://www.facebook.com/jakekve",
				"https://www.linkedin.com/jakekve",
				"https://github.com/korvema"
			]
		}
	</script>

	<meta slot="head" property="og:image" content={new URL("/profile.png", Astro.url)}>
	<meta slot="head" property="profile:first_name" content="Jake">
	<meta slot="head" property="profile:last_name" content="Korvemaa">
	<meta slot="head" property="profile:gender" content="male">
	
	<ScrollView useMargin={true} style="scroll-behavior:smooth;">
		<!-- HERO -->
		<section id="home" class="hero">
			<div>
				<div class="hero-content">
					<pre
						id="ascii-title"> 
                              ▄█    ▄████████    ▄█   ▄█▄    ▄████████                               
                             ███   ███    ███   ███ ▄███▀   ███    ███                               
                             ███   ███    ███   ███▐██▀     ███    █▀                                
                             ███   ███    ███  ▄█████▀     ▄███▄▄▄                                   
                             ███ ▀███████████ ▀▀█████▄    ▀▀███▀▀▀                                   
                             ███   ███    ███   ███▐██▄     ███    █▄                                
                             ███   ███    ███   ███ ▀███▄   ███    ███                               
                         █▄ ▄███   ███    █▀    ███   ▀█▀   ██████████                               
                         ▀▀▀▀▀▀                 ▀                                                    
   ▄█   ▄█▄  ▄██████▄     ▄████████  ▄█    █▄     ▄████████   ▄▄▄▄███▄▄▄▄      ▄████████    ▄████████
  ███ ▄███▀ ███    ███   ███    ███ ███    ███   ███    ███ ▄██▀▀▀███▀▀▀██▄   ███    ███   ███    ███
  ███▐██▀   ███    ███   ███    ███ ███    ███   ███    █▀  ███   ███   ███   ███    ███   ███    ███
 ▄█████▀    ███    ███  ▄███▄▄▄▄██▀ ███    ███  ▄███▄▄▄     ███   ███   ███   ███    ███   ███    ███
▀▀█████▄    ███    ███ ▀▀███▀▀▀▀▀   ███    ███ ▀▀███▀▀▀     ███   ███   ███ ▀███████████ ▀███████████
  ███▐██▄   ███    ███ ▀███████████ ███    ███   ███    █▄  ███   ███   ███   ███    ███   ███    ███
  ███ ▀███▄ ███    ███   ███    ███ ███    ███   ███    ███ ███   ███   ███   ███    ███   ███    ███
  ███   ▀█▀  ▀██████▀    ███    ███  ▀██████▀    ██████████  ▀█   ███   █▀    ███    █▀    ███    █▀ 
  ▀                      ███    ███                                                                  
					</pre>
					<span class="subtitle">
						Software Engineer | Experimentalist
					</span>
					<hr />
					<div class="socials">
						<a
							target="_blank"
							href="https://github.com/korvemaa"
							class="icon bi bi-github"
							><span>GitHub</span>
						</a>
						<a
							target="_blank"
							href="https://linkedin.com/in/jakekve"
							class="icon bi bi-linkedin"><span>LinkedIn</span></a
						>
						<a
							target="_blank"
							href="https://www.youtube.com/@JakeK"
							class="icon bi bi-youtube"><span>YouTube</span></a
						>
					</div>
				</div>
			</div>
		</section>
		<!-- CONTENT -->
		<div id="about" class="view-content">
			<section id="about-section">
				<Box title="About">
					> I'm a software engineer with a genuine passion for
					creating, improving, and understanding software. I love the
					process - learning, experimenting, refining and putting a
					lot of care and passion into the things I build. For me,
					great engineering comes from balancing creativity with
					discipline and respecting the fundamentals. I'm always
					looking for opportunities where I can keep growing and
					contribute to work that actually matters.
				</Box>
				<Box title="Skills"> Hi </Box>
			</section>
			<section>
				<Box title="Professional Experience" style="gap: 1rem;">
					{
						experience.map((job) => {
							return <ExperienceBar experience={job} />;
						})
					}
				</Box>
			</section>
		</div>
	</ScrollView>
</Layout>

<script defer>
	const container = document.getElementById("scroll-view");
	function updateHeroHeight() {
		const height = container.offsetHeight;
		document.documentElement.style.setProperty(
			"--hero-height",
			`${height * 0.9}px`,
		);
	}

	updateHeroHeight();
	window.addEventListener("resize", updateHeroHeight);
</script>

<style>
	:root {
		--hero-height: 0;
	}

	.hero > div {
		display: flex;
		flex-grow: 1;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		text-align: center;
		border: var(--border-width) dotted var(--dimmed-glow-color);
		margin: 1rem;
	}

	.hero {
		display: flex;
		flex-direction: column;
		min-height: var(--hero-height);

		flex: 0 0 auto;
	}

	.hero-content {
		display: flex;
		flex-direction: column;
		gap: 1rem;
	}

	.view-content {
		display: flex;
		flex-direction: column;
		padding: 1rem;
		padding-top: 0;
		gap: 1rem;
	}

	.view-content section {
		flex-grow: 1;
	}

	.view-content section#about-section {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
		gap: 1rem;
	}

	#ascii-title {
		font-family: monospace;
		font-synthesis-weight: none;
		font-variant-ligatures: none;
		line-height: 1;
		font-size: 10px;
		padding: 0;
		margin: 0;
	}

	@media (max-width: 650px) {
		#ascii-title {
			font-size: 8px;
		}
	}

	@media (max-width: 550px) {
		#ascii-title {
			font-size: 6px;
		}
	}

	@media (max-width: 450px) {
		#ascii-title {
			font-size: 4px;
		}
	}

	.socials {
		display: flex;
		flex-wrap: wrap;
		flex-direction: row;
		justify-content: center;
		align-items: center;
		gap: 1rem;
		padding: 1rem;
	}

	.socials .icon {
		display: flex;
		flex-wrap: wrap;
		flex-direction: row;
		align-items: center;
		justify-content: center;

		font-size: 1.5rem;
		padding: 0.5rem 1rem;
		text-decoration: none;
		gap: 1rem;
		border: var(--border-width) dotted var(--dimmed-glow-color);
	}

	.socials .icon:hover {
		background-color: var(--dimmed-glow-color);
	}

	.socials .icon > span {
		font-size: 1rem;
	}
</style>
